name: "Labeler: Download Data"

on:
  workflow_dispatch:
    inputs:
      issues:
        description: "Download issue data"
        required: true
        default: "false"
        type: boolean
      issue_limit:
        description: "Max number of issues to include in the model"
        required: false
        type: number
      pulls:
        description: "Download pull data"
        required: true
        default: "false"
        type: boolean
      pull_limit:
        description: "Max number of pulls to include in the model"
        required: false
        type: number
      label_prefix:
        description: "Label prefix"
        required: true
        type: string
      page_size:
        description: "The number of items to include on each request (max 100)"
        required: false
        type: number
      page_limit:
        description: "Max pages of items to download"
        required: false
        type: number
      cache_key:
        description: "The optional cache key suffix to use for saving data"
        required: false
        type: string
      backup_cache_key:
        description: "The cache key suffix to use for backing up the last downloaded data"
        required: false
        type: string
        default: "backup"
      repository:
        description: "The org/repo to download data from (defaults to current repository)"
        required: false
        type: string

jobs:
  download-data:
    runs-on: ubuntu-latest
    steps:
      - name: "Call Download Data Action"
        uses: jeffhandley/issue-labeler/download-data@main
        with:
          issues: ${{ github.event.inputs.issues }}
          issue_limit: ${{ github.event.inputs.issue_limit }}
          pulls: ${{ github.event.inputs.pulls }}
          pull_limit: ${{ github.event.inputs.pull_limit }}
          label_prefix: ${{ github.event.inputs.label_prefix }}
          page_size: ${{ github.event.inputs.page_size }}
          page_limit: ${{ github.event.inputs.page_limit }}
          cache_key: ${{ github.event.inputs.cache_key }}
          backup_cache_key: ${{ github.event.inputs.backup_cache_key }}
          repository: ${{ github.event.inputs.repository || github.repository }}
          github_token: ${{ secrets.github_token }}
